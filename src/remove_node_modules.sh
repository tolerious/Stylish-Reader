#!/bin/bash

# 递归查找所有 node_modules 文件夹
find . -type d -name "node_modules" | while read -r dir; do
  echo "正在处理文件夹: $dir"
  
  # 删除文件夹中的所有文件，并输出文件名
  find "$dir" -type f | while read -r file; do
    #echo "删除文件: $file"
    rm -f "$file"
  done

  # 删除文件夹中的所有空子文件夹
  find "$dir" -type d -empty -delete

  # 输出已删除的文件夹名字
  echo "已删除文件夹: $dir"
  rm -rf "$dir"
done

echo "所有 node_modules 文件夹及其内容已删除"